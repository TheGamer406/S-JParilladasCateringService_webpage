<script is:inline lang="ts">
document.addEventListener('DOMContentLoaded', () => {
  const nav = document.getElementById('navBar');
  const logoDiv = document.getElementById('logoDiv');
  const menuBtn = document.getElementById('menuBtn');
  const mobileMenu = document.getElementById('mobileMenu');

  if (!nav || !logoDiv || !menuBtn || !mobileMenu) return;

  const title = document.createElement('p');
  title.textContent = 'S&J Parrillada y Catering Service';
  title.className =
    'ml-3 text-lg font-bold font-kalam text-[var(--text_color_1)]';

  let menuOpen = false;

  const isMobile = () => window.innerWidth < 1024;

  const updateLogo = () => {
    if (isMobile()) {
      if (!logoDiv.contains(title)) logoDiv.appendChild(title);
    } else {
      title.remove();
    }
  };

  updateLogo();
  window.addEventListener('resize', updateLogo);

  window.addEventListener('scroll', () => {
    nav.classList.toggle('nav-scrolled', window.scrollY > 70);
    nav.classList.toggle('nav-default', window.scrollY <= 70);
  });

  menuBtn.addEventListener('click', () => {
    menuOpen = !menuOpen;

    mobileMenu.classList.toggle('translate-x-0', menuOpen);
    mobileMenu.classList.toggle('translate-x-full', !menuOpen);

    menuBtn.querySelectorAll('.menu-line').forEach(el =>
      el.classList.toggle('hidden', menuOpen)
    );
    menuBtn.querySelectorAll('.menu-x').forEach(el =>
      el.classList.toggle('hidden', !menuOpen)
    );
  });

  mobileMenu.querySelectorAll('a').forEach(link => {
    link.addEventListener('click', () => {
      menuOpen = false;

      mobileMenu.classList.add('translate-x-full');
      mobileMenu.classList.remove('translate-x-0');

      menuBtn.querySelectorAll('.menu-line').forEach(el =>
        el.classList.remove('hidden')
      );
      menuBtn.querySelectorAll('.menu-x').forEach(el =>
        el.classList.add('hidden')
      );
    });
  });
});
</script>

<nav
  id="navBar"
  class="fixed top-0 left-0 w-full z-50 p-4 flex items-center transition-all duration-300 nav-default"
>
  <!-- Logo -->
  <div id="logoDiv" class="flex items-center">
    <img
      src="/images/logo.webp"
      alt="Logo S&J"
      class="h-[40px] hidden md:block"
    />
  </div>

  <!-- Menu desktop -->
  <ul class="hidden lg:flex gap-10 mx-auto list-none">
    <li><a href="/" class="nav-link">Inicio</a></li>
    <li><a href="/contact" class="nav-link">Contacto</a></li>
    <li><a href="/events" class="nav-link">Eventos</a></li>
    <li><a href="/about" class="nav-link">Nosotros</a></li>
    <li><a href="/blog" class="nav-link">Blog</a></li>
  </ul>

  <!-- Botón hamburguesa / X -->
  <button
    id="menuBtn"
    class="lg:hidden ml-auto text-[var(--text_color_1)] focus:outline-none"
    aria-label="Menú"
  >
    <svg
      class="w-8 h-8"
      viewBox="0 0 24 24"
      fill="none"
      stroke="currentColor"
      stroke-width="2"
      stroke-linecap="round"
      stroke-linejoin="round"
    >
      <!-- Hamburguesa -->
      <path class="menu-line" d="M4 6h16" />
      <path class="menu-line" d="M4 12h16" />
      <path class="menu-line" d="M4 18h16" />

      <!-- X -->
      <path class="menu-x hidden" d="M6 6l12 12" />
      <path class="menu-x hidden" d="M6 18l12-12" />
    </svg>
  </button>
</nav>

<!-- Menú móvil -->
<div
  id="mobileMenu"
  class="fixed inset-0 bg-[var(--background_color_2)]
         flex flex-col items-center justify-center gap-8
         transform translate-x-full transition-transform duration-300
         lg:hidden z-40"
>
  <a href="/" class="mobile-link">Inicio</a>
  <a href="/contact" class="mobile-link">Contacto</a>
  <a href="/events" class="mobile-link">Eventos</a>
  <a href="/about" class="mobile-link">Nosotros</a>
  <a href="/blog" class="mobile-link">Blog</a>
</div>

<style>
.nav-default {
  background: linear-gradient(
    to bottom,
    rgba(0, 0, 0, 1) 0%,
    rgba(0, 0, 0, 0.85) 40%,
    rgba(0, 0, 0, 0) 100%
  );
}

.nav-scrolled {
  background-color: var(--background_color_2);
}

.nav-link {
  display: inline-block;
  color: var(--text_color_1);
  font-weight: bold;
  border-bottom: 2px solid transparent;
  transition: transform 0.3s ease, border-color 0.3s ease;
}

.nav-link:hover {
  border-color: var(--accent_color);
  transform: translateY(-3px);
}

.nav-link:active {
  color: var(--accent_color);
  transform: translateY(1px);
}

.mobile-link {
  color: var(--text_color_1);
  font-size: 1.5rem;
  font-weight: bold;
}
</style>
